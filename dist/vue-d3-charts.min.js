var D3BarChart=function(t,i,e,a,r,s){"use strict";function c(t,i,e,a,r,s,c,n,h,o){"boolean"!=typeof c&&(h=n,n=c,c=!1);var g="function"==typeof e?e.options:e;t&&t.render&&(g.render=t.render,g.staticRenderFns=t.staticRenderFns,g._compiled=!0,r&&(g.functional=!0)),a&&(g._scopeId=a);var l;if(s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,h(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},g._ssrRegister=l):i&&(l=c?function(){i.call(this,o(this.$root.$options.shadowRoot))}:function(t){i.call(this,n(t))}),l)if(g.functional){var f=g.render;g.render=function(t,i){return l.call(i),f(t,i)}}else{var d=g.beforeCreate;g.beforeCreate=d?[].concat(d,l):[l]}return e}i=i&&i.hasOwnProperty("default")?i.default:i;var n={select:e.select,selectAll:e.selectAll,scaleBand:a.scaleBand,scaleLinear:a.scaleLinear,max:r.max,axisBottom:s.axisBottom,axisLeft:s.axisLeft},h=function(t,i,e){var a=this;void 0===e&&(e={}),this.selection=n.select(t),this.data=i,this.cfg={margin:{top:10,right:30,bottom:20,left:40},key:"key",value:"value",labelRotation:0,color:"steelblue",yAxis:"",yScaleTicks:5,yScaleFormat:".0f"},Object.keys(e).forEach(function(t){e[t]instanceof Object&&e[t]instanceof Array==!1?Object.keys(e[t]).forEach(function(i){a.cfg[t][i]=e[t][i]}):a.cfg[t]=e[t]}),this.cfg.width=parseInt(this.selection.node().offsetWidth)-this.cfg.margin.left-this.cfg.margin.right,this.cfg.height=parseInt(this.selection.node().offsetHeight)-this.cfg.margin.top-this.cfg.margin.bottom,this.xScale=n.scaleBand().rangeRound([0,this.cfg.width]).padding(.1),this.yScale=n.scaleLinear().rangeRound([0,this.cfg.height]),window.addEventListener("resize",function(t){a.resize()}),this.initGraph()};h.prototype.initGraph=function(){var t=this;this.xScale.domain(this.data.map(function(i){return i[t.cfg.key]})),this.yScale.domain([n.max(this.data,function(i){return+i[t.cfg.value]}),0]),this.wrap=this.selection.append("div").attr("class","chart__wrap chart__wrap--barchart"),this.svg=this.wrap.append("svg").attr("class","chart chart--barchart").attr("width",this.cfg.width+this.cfg.margin.left+this.cfg.margin.right).attr("height",this.cfg.height+this.cfg.margin.top+this.cfg.margin.bottom),this.g=this.svg.append("g").attr("class","chart__margin-wrap").attr("transform","translate("+this.cfg.margin.left+","+this.cfg.margin.top+")"),this.axisg=this.g.append("g").attr("class","chart__axis chart__axis--barchart"),this.yGrid=this.axisg.append("g").attr("class","chart__grid chart__grid--y chart__grid--barchart").call(this.make_y_gridlines().tickSize(-this.cfg.width).ticks(this.cfg.yScaleTicks,this.cfg.yScaleFormat)),this.cfg.yAxis&&(this.yAxisTitle=this.axisg.append("text").attr("class","chart__axis-title chart__axis-title--barchart").attr("y",10-this.cfg.margin.left).attr("x",-this.cfg.height/2).attr("transform","rotate(-90)").style("text-anchor","middle").text(this.cfg.yAxis)),this.xAxis=this.axisg.append("g").attr("class","chart__axis-x chart__axis-x--barchart").attr("transform","translate(0,"+this.cfg.height+")").call(n.axisBottom(this.xScale)),0!=this.cfg.labelRotation&&this.xAxis.selectAll("text").attr("y",9*Math.cos(this.cfg.labelRotation*Math.PI/180)).attr("x",9*Math.sin(this.cfg.labelRotation*Math.PI/180)).attr("dy",".35em").attr("transform","rotate("+this.cfg.labelRotation+")").style("text-anchor","start"),this.selection.selectAll(".chart__tooltip").remove(),this.tooltip=this.wrap.append("div").attr("class","chart__tooltip chart__tooltip--barchart"),this.itemg=this.g.selectAll(".itemgroup").data(this.data).enter().append("g").attr("class","itemgroup").attr("transform",function(i,e){return"translate("+t.xScale(i[t.cfg.key])+",0)"}),this.rects=this.itemg.append("rect").attr("x",0).attr("y",function(i,e){return t.yScale(+i[t.cfg.value])}).attr("width",this.xScale.bandwidth()).attr("height",function(i){return t.cfg.height-t.yScale(+i[t.cfg.value])}).attr("fill",function(i){return t.cfg.currentkey&&i[t.cfg.key]!=t.cfg.currentkey?t.cfg.greycolor:t.cfg.color}).on("mouseover",function(i){t.tooltip.html(function(){return"\n                        <div>"+i[t.cfg.key]+": "+i[t.cfg.value]+"</div>\n                    "}).classed("active",!0)}).on("mouseout",function(){t.tooltip.classed("active",!1)}).on("mousemove",function(){t.tooltip.style("left",window.event.pageX-28+"px").style("top",window.event.pageY-40+"px")})},h.prototype.resize=function(){var t=this;this.cfg.width=parseInt(this.selection.node().offsetWidth)-this.cfg.margin.left-this.cfg.margin.right,this.cfg.height=parseInt(this.selection.node().offsetHeight)-this.cfg.margin.top-this.cfg.margin.bottom,this.xScale.rangeRound([0,this.cfg.width]),this.yScale.rangeRound([0,this.cfg.height]),this.svg.attr("viewBox","0 0 "+(this.cfg.width+this.cfg.margin.left+this.cfg.margin.right)+" "+(this.cfg.height+this.cfg.margin.top+this.cfg.margin.bottom)).attr("width",this.cfg.width+this.cfg.margin.left+this.cfg.margin.right).attr("height",this.cfg.height+this.cfg.margin.top+this.cfg.margin.bottom),this.yGrid.call(this.make_y_gridlines().tickSize(-this.cfg.width).ticks(this.cfg.yScaleTicks,this.cfg.yScaleFormat)),this.xAxis.attr("transform","translate(0,"+this.cfg.height+")").call(n.axisBottom(this.xScale)),this.cfg.yAxis&&this.yAxisTitle.attr("x",-this.cfg.height/2),this.itemg.attr("transform",function(i){return"translate("+t.xScale(i[t.cfg.key])+",0)"}),this.rects.attr("width",this.xScale.bandwidth()).attr("y",function(i){return t.yScale(+i[t.cfg.value])}).attr("height",function(i){return t.cfg.height-t.yScale(+i[t.cfg.value])})},h.prototype.make_x_gridlines=function(){return n.axisBottom(this.xScale)},h.prototype.make_y_gridlines=function(){return n.axisLeft(this.yScale)};var o=c,g={D3BarChart:o({render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"chart__wrapper"},[t.title?e("div",{staticClass:"chart__title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),e("div",{ref:"chart",style:{height:this.height+"px"}}),t._v(" "),t.source?e("div",{staticClass:"chart__source"},[t._v(t._s(t.source))]):t._e()])},staticRenderFns:[]},void 0,{name:"bar-chart",data:function(){return{chart:{}}},props:{config:{type:Object,required:!0,default:function(){return{}}},datum:{type:Array,required:!0,default:function(){return[]}},title:{type:String,default:""},source:{type:String,default:""},height:{type:Number,default:300}},mounted:function(){this.chart=new h(this.$refs.chart,this.datum,this.config)}},void 0,!1,void 0,void 0,void 0),D3LineChart:o({render:function(){var t=this,i=t.$createElement;return(t._self._c||i)("div",[t._v("\n  D3LineChart\n")])},staticRenderFns:[]},void 0,{name:"D3LineChart"},void 0,!1,void 0,void 0,void 0)};return Object.keys(g).forEach(function(t){i.component(t,g[t])}),t.default=g,t}({},Vue,d3Selection,d3Scale,d3Array,d3Axis);
